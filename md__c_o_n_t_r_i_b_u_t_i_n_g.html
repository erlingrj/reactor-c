<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>reactor-c: Style guidelines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">reactor-c
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Style guidelines </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >We follow the guidelines proposed in the small book, <a href="https://barrgroup.com/sites/default/files/barr_c_coding_standard_2018.pdf"><em>Embedded C Coding Standard</em></a> by Michael Barr, with some exceptions. This standard was chosen because it is available for free and because it was similar in some superficial ways to the style that we already prefer.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Project-specific exceptions to the standard</h2>
<p >We use some arbitrary exceptions to the Barr standard. These serve</p><ul>
<li>to minimize the version history noise required to come into compliance, and</li>
<li>to avoid unnecessary differences between our C style guidelines and our Java style guidelines.</li>
</ul>
<h3><a class="anchor" id="autotoc_md2"></a>
Braces (1.3)</h3>
<p >We use K&amp;R-style braces. Example: </p><div class="fragment"><div class="line">if (NULL == p_event) {</div>
<div class="line">    lf_print_error_and_exit(&quot;Out of memory!&quot;);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3"></a>
The pointer operator * in declarations (3.1g)</h3>
<p >We only use a space on the variable name side (RHS) of *. Example: </p><div class="fragment"><div class="line">int* ptr;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4"></a>
Function declarations (3.1j)</h3>
<p >When defining a function, we do not add a space between the function name and the opening parenthesis.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Horizontal alignment (3.2a, c)</h3>
<p >Tabs are always forbidden. The use of multiple consecutive spaces is forbidden except as indentation at the beginning of a line or as required by rule 3.2d.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Blank lines separating natural blocks of code (3.3b)</h3>
<p >The only natural blocks of code that must be preceded and followed by a blank line are procedure definitions. Elsewhere, blank lines should only be used where they aid readability.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
End-of-file comments (3.3c)</h3>
<p >We do not print out code for the purpose of code review. We do not require end-of-file comments.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Header files (4.2a)</h3>
<p >Multiple source files corresponding to one header file are permitted if and only if they represent alternative functionality that depends on a preprocessor definition.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
Names of public data types (5.1c)</h3>
<p >The names of all public data types shall be prefixed with <code>lf_</code>.</p>
<h3><a class="anchor" id="autotoc_md10"></a>
Names of public functions (6.1i)</h3>
<p >The names of all public functions shall be prefixed with <code>lf_</code>.</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Macro capitalization (6.1f)</h3>
<p >The only acceptable use of macros containing lowercase letters is macros prefixed by <code>lf_</code> that appear in the <code>reactor-c</code> public API.</p>
<h3><a class="anchor" id="autotoc_md12"></a>
Printed pages (6.2 and elsewhere)</h3>
<p >We do not print code for the purpose of code review. In cases where Barr refers to the size of a printed page, consider the size of a typical computer monitor instead. In particular, all reasonable effort shall be taken to keep the length of each function limited to a maximum of <b>40 lines</b>.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Short variable names (7.1e)</h3>
<p >We place no restrictions on the length of variable names; however, recommendations against cryptic abbreviations and abbreviations not in a version-controlled table still apply.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Hungarian notation (7.1 j, k, l, m, n, o)</h3>
<p >Hungarian notation is never required and is only permitted in unusual cases where it aids readability. The abbreviations listed in the "Abbreviations" table remain valid. Example: The <code>p_</code> and <code>pp_</code> prefixes are permitted in the navigation of potentially confusing data structures.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Addenda</h2>
<h3><a class="anchor" id="autotoc_md16"></a>
Inlining-related performance optimizations</h3>
<p >Before attempting to encourage or force inlining, e.g. using the <code>inline</code> keyword and/or parameterized macros, consider whether similar performance could be realized using link-time optimization instead.</p>
<h3><a class="anchor" id="autotoc_md17"></a>
Return types in function declarations</h3>
<p >The return type of a function must appear on the same line as the function name.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
Line breaks</h3>
<p >If the parenthesized expression(s) in a parameter list, <code>if</code> statement,<code>for</code> loop, <code>while loop</code>, or similar is too long to fit on one line, then the opening parenthesis must be immediately followed by a line feed, and the closing parenthesis and opening bracket must appear one their own line. Example:</p>
<div class="fragment"><div class="line">while (</div>
<div class="line">    NULL != (</div>
<div class="line">        current_reaction_to_execute = lf_sched_get_ready_reaction(worker_number)</div>
<div class="line">    )</div>
<div class="line">) {</div>
<div class="line">    // Do something</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md19"></a>
Section headers in files</h3>
<p >Sections within files shall not be marked by explicit section headers. They shall be made clear by adhering to the sectioning suggested by the source and header file templates.</p>
<h3><a class="anchor" id="autotoc_md20"></a>
Documentation comment format</h3>
<p >We use the Javadoc-style <code>/**</code> to mark documentation comments, and we precede any Doxygen commands with an <code>@</code> sign. Example:</p>
<div class="fragment"><div class="line"> </div>
</div><!-- fragment --><p >The opening <code>/**</code> marker must be immediately followed by a line feed.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Documentation comment placement</h3>
<p >Documentation comments of public procedures must be provided in the corresponding header files.</p>
<p >Documentation comments for nontrivial private procedures must be provided where those procedures are implemented.</p>
<p >Duplication of multiline comments or of sigificant parts of multiline comments is forbidden.</p>
<h1><a class="anchor" id="autotoc_md22"></a>
Abbreviations</h1>
<p >The following is an extended version of the table provided by the Barr standard.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Abbreviation   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">adc   </td><td class="markdownTableBodyNone">analog-to-digital converter    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">addr   </td><td class="markdownTableBodyNone">address    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">argc   </td><td class="markdownTableBodyNone">argument count    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">argv   </td><td class="markdownTableBodyNone">argument vector    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">avg   </td><td class="markdownTableBodyNone">average    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">b_   </td><td class="markdownTableBodyNone">boolean    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">buf   </td><td class="markdownTableBodyNone">buffer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">cfg   </td><td class="markdownTableBodyNone">configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">cond   </td><td class="markdownTableBodyNone">condition variable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ctor   </td><td class="markdownTableBodyNone">constructor    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">curr   </td><td class="markdownTableBodyNone">current (item in a list)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dac   </td><td class="markdownTableBodyNone">digital-to-analog converter    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dtor   </td><td class="markdownTableBodyNone">destructor    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ee   </td><td class="markdownTableBodyNone">EEPROM    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">err   </td><td class="markdownTableBodyNone">error    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">fed   </td><td class="markdownTableBodyNone">federate/federated    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">g_   </td><td class="markdownTableBodyNone">global    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">gpio   </td><td class="markdownTableBodyNone">general purpose I/0 pins    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">h_   </td><td class="markdownTableBodyNone">handle (to)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">id   </td><td class="markdownTableBodyNone">ID    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">init   </td><td class="markdownTableBodyNone">initialize    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">io   </td><td class="markdownTableBodyNone">input/output    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ip   </td><td class="markdownTableBodyNone">Internet Protocol    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">isr   </td><td class="markdownTableBodyNone">interrupt service routine    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">lcd   </td><td class="markdownTableBodyNone">liquid crystal display    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">led   </td><td class="markdownTableBodyNone">light-emitting diode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">lf   </td><td class="markdownTableBodyNone">Lingua Franca    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">max   </td><td class="markdownTableBodyNone">maximum    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">min   </td><td class="markdownTableBodyNone">minumum    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">msec   </td><td class="markdownTableBodyNone">millisecond    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">msg   </td><td class="markdownTableBodyNone">message    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">net   </td><td class="markdownTableBodyNone">network    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">next   </td><td class="markdownTableBodyNone">next (item in a list)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">nsec   </td><td class="markdownTableBodyNone">nanosecond    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">num   </td><td class="markdownTableBodyNone">number (of)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">p_   </td><td class="markdownTableBodyNone">pointer (to)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">param   </td><td class="markdownTableBodyNone">parameter    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">pp_   </td><td class="markdownTableBodyNone">pointer to a pointer (to)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">pqueue   </td><td class="markdownTableBodyNone">priority queue    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">prev   </td><td class="markdownTableBodyNone">previous (item in a list)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">prio   </td><td class="markdownTableBodyNone">priority    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ptag   </td><td class="markdownTableBodyNone">provisional tag    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">pwm   </td><td class="markdownTableBodyNone">pulse width modulation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">q   </td><td class="markdownTableBodyNone">queue    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ref   </td><td class="markdownTableBodyNone">reference    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">reg   </td><td class="markdownTableBodyNone">register    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ret   </td><td class="markdownTableBodyNone">return value    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">rti   </td><td class="markdownTableBodyNone">runtime infrastructure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">rx   </td><td class="markdownTableBodyNone">receive    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sched   </td><td class="markdownTableBodyNone">scheduler    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sem   </td><td class="markdownTableBodyNone">semaphore    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sta   </td><td class="markdownTableBodyNone">safe to advance (time)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">staa   </td><td class="markdownTableBodyNone">safe to assume absent    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">stp   </td><td class="markdownTableBodyNone">safe to process    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">str   </td><td class="markdownTableBodyNone">string (null-terminated)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sync   </td><td class="markdownTableBodyNone">synchronize    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">tcp   </td><td class="markdownTableBodyNone">transmission control protocol    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">temp   </td><td class="markdownTableBodyNone">temperature    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">tmp   </td><td class="markdownTableBodyNone">temporary    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">tx   </td><td class="markdownTableBodyNone">transmit    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">udp   </td><td class="markdownTableBodyNone">User Datagram Protocol    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">usec   </td><td class="markdownTableBodyNone">microsecond    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">util   </td><td class="markdownTableBodyNone">utilities   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md23"></a>
Source file template</h1>
<div class="fragment"><div class="line"> </div>
<div class="line">&lt;#includes <span class="keywordflow">for</span> standard libraries and files associated with the target platform&gt;</div>
<div class="line"> </div>
<div class="line">&lt;#includes <span class="keywordflow">for</span> header files belonging to our project&gt;</div>
<div class="line"> </div>
<div class="line">&lt;preprocessor definitions&gt;</div>
<div class="line"> </div>
<div class="line">&lt;definitions <span class="keywordflow">for</span> <span class="keyword">private</span> types&gt;</div>
<div class="line"> </div>
<div class="line">&lt;constants&gt;</div>
<div class="line"> </div>
<div class="line">&lt;global data definitions&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keyword">static</span> data declarations and definitions&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keyword">private</span> procedure prototypes&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keyword">public</span> procedure bodies&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keyword">private</span> procedure bodies&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md24"></a>
Header file template</h1>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef &lt;file name in all caps, with &quot;.&quot;</span> replaced with &quot;_&quot;&gt;</div>
<div class="line"><span class="preprocessor">#define &lt;file name in all caps, with &quot;.&quot;</span> replaced with &quot;_&quot;&gt;</div>
<div class="line"> </div>
<div class="line">&lt;#includes <span class="keywordflow">for</span> standard libraries and files associated with the target platform&gt;</div>
<div class="line"> </div>
<div class="line">&lt;#includes <span class="keywordflow">for</span> header files belonging to our project&gt;</div>
<div class="line"> </div>
<div class="line">&lt;preprocessor definitions&gt;</div>
<div class="line"> </div>
<div class="line">&lt;definitions <span class="keywordflow">for</span> <span class="keyword">public</span> types&gt;</div>
<div class="line"> </div>
<div class="line">&lt;global variable declarations&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keyword">public</span> procedure prototypes&gt;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">// &lt;file name in all caps, with &quot;.&quot; replaced with &quot;_&quot;&gt;</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
